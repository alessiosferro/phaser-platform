var e=Object.defineProperty,t=(t,s,r)=>(((t,s,r)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r})(t,"symbol"!=typeof s?s+"":s,r),r);import{p as s,P as r}from"./phaser-gBk57k7n.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class a extends s.Scene{constructor(){super("Boot")}preload(){this.load.image("sky","assets/sky.png")}create(){this.scene.start("Preloader")}}class i extends r.Scene{constructor(){super("Game"),t(this,"platforms"),t(this,"player"),t(this,"cursors"),t(this,"space"),t(this,"stars"),t(this,"bombs"),t(this,"score",0),t(this,"isGameOver",!1),t(this,"scoreText")}create(){var e;this.add.image(512,386,"sky").setScale(1.28),this.drawPlatforms(),this.drawPlayer(),this.drawStars(),this.drawBombs(),this.drawScore(),this.addMoveAnimations(),this.cursors=null==(e=this.input.keyboard)?void 0:e.createCursorKeys()}update(){this.updatePlayerState()}updatePlayerState(){var e,t;if(this.isGameOver)return;const{velocityX:s,animation:r}=(null==(e=this.cursors)?void 0:e.left.isDown)?{velocityX:-200,animation:"left"}:(null==(t=this.cursors)?void 0:t.right.isDown)?{velocityX:200,animation:"right"}:{velocityX:0,animation:"turn"};this.player.setVelocityX(s),this.player.anims.play(r,!0),this.isPlayerJumping()&&this.player.setVelocityY(-700)}drawScore(){this.scoreText=this.add.text(960,32,"0",{fontSize:36,fontFamily:"Tahoma, sans-serif",color:"gold"})}isPlayerJumping(){var e,t;return((null==(e=this.space)?void 0:e.isDown)||(null==(t=this.cursors)?void 0:t.up.isDown))&&this.player.body.touching.down}drawBombs(){this.bombs=this.physics.add.group(),this.physics.add.collider(this.bombs,this.platforms),this.physics.add.overlap(this.bombs,this.player,this.hitBomb,void 0,this)}hitBomb(){this.physics.pause(),this.player.setTint(16711680),this.player.anims.play("turn"),this.isGameOver=!0}drawStars(){this.stars=this.physics.add.group({key:"star",repeat:12,setScale:{x:1.4},setXY:{x:30,y:0,stepX:80}}),this.stars.children.iterate((e=>("setBounce"in e&&e.setBounce(.2),null))),this.physics.add.collider(this.stars,this.platforms),this.physics.add.overlap(this.stars,this.player,this.collectStar,void 0,this)}collectStar(e,t){if(this.score+=10,this.scoreText.setText(this.score.toString()),"disableBody"in t&&t.disableBody(!0,!0),this.areAllStarsCollected()&&(this.resetStars(),"x"in e)){const t=e.x<512?r.Math.Between(512,1024):r.Math.Between(0,512),s=this.bombs.create(t,16,"bomb").setScale(1.5).refreshBody();s.setBounce(!0),s.setCollideWorldBounds(!0),s.setVelocity(r.Math.Between(-200,200),80)}}areAllStarsCollected(){return 0===this.stars.countActive(!0)}resetStars(){this.stars.children.iterate((e=>("enableBody"in e&&"x"in e&&e.enableBody(!0,e.x,0,!0,!0),!0)))}drawPlatforms(){this.platforms=this.physics.add.staticGroup(),this.platforms.create(512,752,"platform").setScale(3,1).refreshBody(),this.platforms.create(256,600,"platform").setScale(.6,1).refreshBody(),this.platforms.create(768,600,"platform").setScale(.6,1).refreshBody(),this.platforms.create(512,450,"platform").setScale(.6,1).refreshBody()}drawPlayer(){var e;this.player=this.physics.add.sprite(512,600,"dude").setScale(1.25).refreshBody(),this.player.setBounce(.15),this.player.setCollideWorldBounds(!0),this.physics.add.collider(this.player,this.platforms),this.space=null==(e=this.input.keyboard)?void 0:e.addKey("SPACE")}addMoveAnimations(){this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("dude",{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("dude",{start:5,end:8}),frameRate:10,repeat:-1}),this.anims.create({key:"turn",frames:[{key:"dude",frame:4}]})}}class o extends s.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"sky").setScale(1.28),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("bomb","bomb.png"),this.load.spritesheet("dude","dude.png",{frameWidth:32,frameHeight:48}),this.load.image("star","star.png"),this.load.image("platform","platform.png")}create(){this.scene.start("Game")}}const l={type:Phaser.AUTO,width:1024,height:768,physics:{default:"arcade",arcade:{gravity:{x:0,y:1500},debug:!1}},parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[a,o,i]};new s.Game(l);
